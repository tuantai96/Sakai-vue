{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"role-organization\"\n};\nconst _hoisted_2 = {\n  class: \"default-roles-container\"\n};\nconst _hoisted_3 = {\n  class: \"flex justify-content-between align-items-center mt-5 mb-3\"\n};\nconst _hoisted_4 = {\n  for: \"defaultRole\"\n};\nconst _hoisted_5 = {\n  class: \"list-default-roles\"\n};\nconst _hoisted_6 = {\n  key: 1\n};\nconst _hoisted_7 = {\n  class: \"text-center block\"\n};\nconst _hoisted_8 = {\n  class: \"organization-container\"\n};\nconst _hoisted_9 = {\n  class: \"flex justify-content-between align-items-center mt-5 mb-3\"\n};\nconst _hoisted_10 = {\n  for: \"organizations\"\n};\nconst _hoisted_11 = {\n  class: \"list-organization\"\n};\nconst _hoisted_12 = {\n  key: 1\n};\nconst _hoisted_13 = {\n  class: \"text-center block\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Button = _resolveComponent(\"Button\");\n\n  const _component_Column = _resolveComponent(\"Column\");\n\n  const _component_DataTable = _resolveComponent(\"DataTable\");\n\n  const _component_RolesDialog = _resolveComponent(\"RolesDialog\");\n\n  const _component_OrganizationsDialog = _resolveComponent(\"OrganizationsDialog\");\n\n  const _component_CustomConfirmDialog = _resolveComponent(\"CustomConfirmDialog\");\n\n  const _directive_tooltip = _resolveDirective(\"tooltip\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"h5\", null, _toDisplayString(`${$setup.t('userDetail.roleAndOrganization')}`), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"label\", _hoisted_4, _toDisplayString($setup.t('roleAndOrganization.defaultRole')), 1\n  /* TEXT */\n  ), _createVNode(_component_Button, {\n    label: $setup.t('select'),\n    onClick: $options.showRolesDialog\n  }, null, 8\n  /* PROPS */\n  , [\"label\", \"onClick\"])]), _createCommentVNode(\"      <Divider/>\"), _createElementVNode(\"div\", _hoisted_5, [$data.defaultRoles.length ? (_openBlock(), _createBlock(_component_DataTable, {\n    key: 0,\n    value: $data.defaultRoles,\n    responsiveLayout: \"scroll\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_Column, {\n      header: $setup.t('roleAndOrganization.defaultRole'),\n      field: \"roleName\"\n    }, null, 8\n    /* PROPS */\n    , [\"header\"]), _createVNode(_component_Column, {\n      header: $setup.t('actions')\n    }, {\n      body: _withCtx(slotProps => [_withDirectives(_createVNode(_component_Button, {\n        class: \"p-button-rounded p-button-danger p-button-text p-button-sm\",\n        icon: \"pi pi-times\",\n        onClick: $event => $options.confirmRemoveDefaultRole(slotProps.data)\n      }, null, 8\n      /* PROPS */\n      , [\"onClick\"]), [[_directive_tooltip, $setup.t('delete'), void 0, {\n        top: true\n      }]])]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"header\"])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"value\"])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"label\", _hoisted_7, _toDisplayString($setup.t('emptyRecords', {\n    itemName: $setup.t('role.name')\n  })), 1\n  /* TEXT */\n  )]))])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"label\", _hoisted_10, _toDisplayString($setup.t('roleAndOrganization.organizations')), 1\n  /* TEXT */\n  ), _createVNode(_component_Button, {\n    label: $setup.t('select'),\n    onClick: $options.showOrganizationsDialog\n  }, null, 8\n  /* PROPS */\n  , [\"label\", \"onClick\"])]), _createCommentVNode(\"      <Divider/>\"), _createElementVNode(\"div\", _hoisted_11, [$data.organizations.length ? (_openBlock(), _createBlock(_component_DataTable, {\n    key: 0,\n    value: $data.organizations,\n    responsiveLayout: \"scroll\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_Column, {\n      header: $setup.t('roleAndOrganization.organizations'),\n      field: \"organizationName\"\n    }, null, 8\n    /* PROPS */\n    , [\"header\"]), _createVNode(_component_Column, {\n      header: $setup.t('roleAndOrganization.organizationRole')\n    }, {\n      body: _withCtx(slotProps => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(slotProps.data.roles, role => {\n        return _openBlock(), _createElementBlock(\"label\", null, [role && role.roleId ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 0,\n          class: _normalizeClass([{\n            'organization-role-default': role.isDefault\n          }, \"organization-role-chip border-none p-0 mr-3\"])\n        }, [_withDirectives((_openBlock(), _createBlock(_component_Button, {\n          class: \"m-0 px-3\",\n          onClick: $event => $options.setDefaultOrganizationRole(slotProps.data, role)\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(role.roleName), 1\n          /* TEXT */\n          )]),\n          _: 2\n          /* DYNAMIC */\n\n        }, 1032\n        /* PROPS, DYNAMIC_SLOTS */\n        , [\"onClick\"])), [[_directive_tooltip, role.isDefault ? null : $setup.t('roleAndOrganization.setDefault'), void 0, {\n          top: true\n        }]]), !role.isDefault ? _withDirectives((_openBlock(), _createBlock(_component_Button, {\n          key: 0,\n          class: \"\",\n          icon: \"pi pi-times\",\n          onClick: $event => $options.confirmRemoveOrganizationRole(slotProps.data, role)\n        }, null, 8\n        /* PROPS */\n        , [\"onClick\"])), [[_directive_tooltip, role.isDefault ? null : $setup.t('delete'), void 0, {\n          top: true\n        }]]) : _createCommentVNode(\"v-if\", true)], 2\n        /* CLASS */\n        )) : _createCommentVNode(\"v-if\", true)]);\n      }), 256\n      /* UNKEYED_FRAGMENT */\n      ))]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"header\"]), _createVNode(_component_Column, {\n      header: $setup.t('actions')\n    }, {\n      body: _withCtx(slotProps => [_withDirectives(_createVNode(_component_Button, {\n        class: \"p-button-rounded p-button-text p-button-sm\",\n        icon: \"pi pi-plus\",\n        onClick: $event => $options.showOrganizationRoleDialog(slotProps.data)\n      }, null, 8\n      /* PROPS */\n      , [\"onClick\"]), [[_directive_tooltip, $setup.t('roleAndOrganization.addRole'), void 0, {\n        top: true\n      }]]), _withDirectives(_createVNode(_component_Button, {\n        class: \"p-button-rounded p-button-danger p-button-text p-button-sm\",\n        icon: \"pi pi-times\",\n        onClick: $event => $options.confirmRemoveOrganization(slotProps.data)\n      }, null, 8\n      /* PROPS */\n      , [\"onClick\"]), [[_directive_tooltip, $setup.t('delete'), void 0, {\n        top: true\n      }]])]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"header\"])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"value\"])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"label\", _hoisted_13, _toDisplayString($setup.t('emptyRecords', {\n    itemName: $setup.t('organization.name')\n  })), 1\n  /* TEXT */\n  )]))])])]), $data.rolesDialog ? (_openBlock(), _createBlock(_component_RolesDialog, {\n    key: 0,\n    \"default-roles\": $data.defaultRoles,\n    \"hide-dialogs\": $options.hideDialogs,\n    organization: $data.organization,\n    \"roles-dialog\": $data.rolesDialog,\n    type: $data.type,\n    \"update-role\": $options.updateRole,\n    user: $props.user\n  }, null, 8\n  /* PROPS */\n  , [\"default-roles\", \"hide-dialogs\", \"organization\", \"roles-dialog\", \"type\", \"update-role\", \"user\"])) : _createCommentVNode(\"v-if\", true), $data.organizationsDialog ? (_openBlock(), _createBlock(_component_OrganizationsDialog, {\n    key: 1,\n    \"hide-dialogs\": $options.hideDialogs,\n    organizations: $data.organizations,\n    \"organizations-dialog\": $data.organizationsDialog,\n    \"update-organization\": $options.updateOrganization,\n    user: $props.user\n  }, null, 8\n  /* PROPS */\n  , [\"hide-dialogs\", \"organizations\", \"organizations-dialog\", \"update-organization\", \"user\"])) : _createCommentVNode(\"v-if\", true), $data.confirmDialog ? (_openBlock(), _createBlock(_component_CustomConfirmDialog, {\n    key: 2,\n    \"action-confirm\": $data.actionConfirm,\n    \"confirm-dialog\": $data.confirmDialog,\n    \"confirm-message\": $data.confirmMessage,\n    \"hide-dialogs\": $options.hideDialogs,\n    item: $data.item\n  }, null, 8\n  /* PROPS */\n  , [\"action-confirm\", \"confirm-dialog\", \"confirm-message\", \"hide-dialogs\", \"item\"])) : _createCommentVNode(\"v-if\", true)], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;EACOA,KAAK,EAAC;;;EAEJA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EACFC,GAAG,EAAC;;;EAIRD,KAAK,EAAC;;;;;;EAWAA,KAAK,EAAC;;;EAKdA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EACFC,GAAG,EAAC;;;EAIRD,KAAK,EAAC;;;;;;EAsCAA,KAAK,EAAC;;;;;;;;;;;;;;;;;6DApErBE,oBAwEM,KAxEN,cAwEM,CAvEJA,oBAAuD,IAAvD,EAAuD,IAAvD,EAAuDC,oBAA7CC,SAAC,gCAAD,CAAC,EAA4C,CAAvD,EAAW;EAAA;EAAX,CAuEI,EAtEJF,oBAoBM,KApBN,cAoBM,CAnBJA,oBAGM,KAHN,cAGM,CAFJA,oBAA2E,OAA3E,cAA2EC,iBAA/CC,SAAC,iCAAD,CAA+C,CAA3E,EAA6B;EAAA;EAA7B,CAEI,EADJC,aAAuDC,iBAAvD,EAAuD;IAA9CC,KAAK,EAAEH,SAAC,QAAD,CAAuC;IAAzBI,OAAK,EAAEC;EAAkB,CAAvD;;EAAA,uBACI,CAHN,CAmBI,EAfJC,uCAeI,EAdJR,oBAaM,KAbN,cAaM,CAZaS,mBAAaC,wBAA9BC,aAQYC,oBARZ,EAQY;UAAA;IAR2BC,KAAK,EAAEJ,kBAQlC;IARgDK,gBAAgB,EAAC;EAQjE,CARZ;sBACE,MAAiF,CAAjFX,aAAiFY,iBAAjF,EAAiF;MAAxEC,MAAM,EAAEd,SAAC,iCAAD,CAAgE;MAA1Be,KAAK,EAAC;IAAoB,CAAjF;;IAAA,aAAiF,EACjFd,aAKSY,iBALT,EAKS;MALAC,MAAM,EAAEd,SAAC,SAAD;IAKR,CALT;MACagB,IAAI,WAAEC,SACf,IADwB,iBACxBhB,aAC8EC,iBAD9E,EAC8E;QAD1CN,KAAK,EAAC,4DACoC;QAAtEsB,IAAI,EAAC,aAAiE;QAAlDd,OAAK,YAAEC,kCAAyBY,SAAS,CAACE,IAAnC;MAA2C,CAD9E;;MAAA,sCAAuBnB,SAAC,QAAD;aAAf;UADgB,CAAX;;;;KADjB;;IAAA,aADiF;;;;GADnF;;EAAA,+BASAoB,oBAEM,KAFN,EAEMC,UAFN,EAEM,CADJvB,oBAA4F,OAA5F,cAA4FC,iBAAxDC,SAAC,cAAD,EAAC;IAAAsB,UAA4BtB,SAAC,WAAD;EAA5B,CAAD,CAAwD,CAA5F,EAAkE;EAAA;EAAlE,CACI,CAFN,EAGI,CAbN,CAcI,CApBN,CAsEI,EAhDJF,oBA+CM,KA/CN,cA+CM,CA9CJA,oBAGM,KAHN,cAGM,CAFJA,oBAA+E,OAA/E,eAA+EC,iBAAjDC,SAAC,mCAAD,CAAiD,CAA/E,EAA+B;EAAA;EAA/B,CAEI,EADJC,aAA+DC,iBAA/D,EAA+D;IAAtDC,KAAK,EAAEH,SAAC,QAAD,CAA+C;IAAjCI,OAAK,EAAEC;EAA0B,CAA/D;;EAAA,uBACI,CAHN,CA8CI,EA1CJC,uCA0CI,EAzCJR,oBAwCM,KAxCN,eAwCM,CAvCaS,oBAAcC,wBAA/BC,aAmCYC,oBAnCZ,EAmCY;UAAA;IAnC4BC,KAAK,EAAEJ,mBAmCnC;IAnCkDK,gBAAgB,EAAC;EAmCnE,CAnCZ;sBACE,MAA2F,CAA3FX,aAA2FY,iBAA3F,EAA2F;MAAlFC,MAAM,EAAEd,SAAC,mCAAD,CAA0E;MAAlCe,KAAK,EAAC;IAA4B,CAA3F;;IAAA,aAA2F,EAC3Fd,aAoBSY,iBApBT,EAoBS;MApBAC,MAAM,EAAEd,SAAC,sCAAD;IAoBR,CApBT;MACagB,IAAI,WAAEC,SACR,IADiB,oBACxBG,oBAgBQG,SAhBR,EAgBQ,IAhBR,EAgBQC,YAhBcP,SAAS,CAACE,IAAV,CAAeM,KAgB7B,EAhBMC,IAA4B,IAAxB;6BAAlBN,oBAgBQ,OAhBR,EAgBQ,IAhBR,EAgBQ,CAfKM,IAAI,IAAIA,IAAI,CAACC,wBAAxBP,oBAcM,KAdN,EAcM;gBAAA;UAd2BxB,KAAK;YAAA,6BAAiC8B,IAAI,CAACE;UAAtC,GAC3B,6CAD2B;QAchC,CAdN,kCAEEnB,aAISP,iBAJT,EAIS;UAHDN,KAAK,EAAC,UAGL;UAFAQ,OAAK,YAAEC,oCAA2BY,SAAS,CAACE,IAArC,EAA2CO,IAA3C;QAEP,CAJT;4BAGE,MAAmB,mCAAhBA,IAAI,CAACG,WAAQ;UAAA;WAAG;;;;SAHrB;;QAAA,uCAAuBH,IAAI,CAACE,SAAL,GAAc,IAAd,GAAwB5B,SAAC,gCAAD;eAAvC;eAMG0B,IAAI,CAACE,2CADhBnB,aAMEP,iBANF,EAME;gBAAA;UAHEN,KAAK,EAAC,EAGR;UAFEsB,IAAI,EAAC,aAEP;UADGd,OAAK,YAAEC,uCAA8BY,SAAS,CAACE,IAAxC,EAA8CO,IAA9C;QACV,CANF;;QAAA,uCAEmBA,IAAI,CAACE,SAAL,GAAc,IAAd,GAAwB5B,SAAC,QAAD;eAAvC;iDATN;;QAAA,sCAeM,CAhBR;OAgBQ,CAhBR;;MAAA,CADwB,EAAX;;;;KADjB;;IAAA,aAD2F,EAsB3FC,aAWSY,iBAXT,EAWS;MAXAC,MAAM,EAAEd,SAAC,SAAD;IAWR,CAXT;MACagB,IAAI,WAAEC,SACf,IADwB,iBACxBhB,aAKEC,iBALF,EAKE;QAHEN,KAAK,EAAC,4CAGR;QAFEsB,IAAI,EAAC,YAEP;QADGd,OAAK,YAAEC,oCAA2BY,SAAS,CAACE,IAArC;MACV,CALF;;MAAA,sCACmBnB,SAAC,6BAAD;aAAf;UAFoB,kBAOxBC,aAC+EC,iBAD/E,EAC+E;QAD3CN,KAAK,EAAC,4DACqC;QAAvEsB,IAAI,EAAC,aAAkE;QAAnDd,OAAK,YAAEC,mCAA0BY,SAAS,CAACE,IAApC;MAA4C,CAD/E;;MAAA,sCAAuBnB,SAAC,QAAD;aAAf;UAPgB,CAAX;;;;KADjB;;IAAA,aAtB2F;;;;GAD7F;;EAAA,+BAoCAoB,oBAEM,KAFN,EAEMU,WAFN,EAEM,CADJhC,oBAAoG,OAApG,eAAoGC,iBAAhEC,SAAC,cAAD,EAAC;IAAAsB,UAA4BtB,SAAC,mBAAD;EAA5B,CAAD,CAAgE,CAApG,EAAkE;EAAA;EAAlE,CACI,CAFN,EAGI,CAxCN,CAyCI,CA/CN,CAgDI,CAxEN,GA2EUO,mCADVE,aASEsB,sBATF,EASE;UAAA;IAPG,iBAAexB,kBAOlB;IANG,gBAAcF,oBAMjB;IALG2B,YAAY,EAAEzB,kBAKjB;IAJG,gBAAcA,iBAIjB;IAHG0B,IAAI,EAAE1B,UAGT;IAFG,eAAaF,mBAEhB;IADG6B,IAAI,EAAEC;EACT,CATF;;EAAA,0IAYU5B,2CADVE,aAOE2B,8BAPF,EAOE;UAAA;IALG,gBAAc/B,oBAKjB;IAJGgC,aAAa,EAAE9B,mBAIlB;IAHG,wBAAsBA,yBAGzB;IAFG,uBAAqBF,2BAExB;IADG6B,IAAI,EAAEC;EACT,CAPF;;EAAA,kIAUU5B,qCADVE,aAOE6B,8BAPF,EAOE;UAAA;IALG,kBAAgB/B,mBAKnB;IAJG,kBAAgBA,mBAInB;IAHG,mBAAiBA,oBAGpB;IAFG,gBAAcF,oBAEjB;IADGkC,IAAI,EAAEhC;EACT,CAPF;;EAAA","names":["class","for","_createElementVNode","_toDisplayString","$setup","_createVNode","_component_Button","label","onClick","$options","_createCommentVNode","$data","length","_createBlock","_component_DataTable","value","responsiveLayout","_component_Column","header","field","body","slotProps","icon","data","_createElementBlock","_hoisted_6","itemName","_Fragment","_renderList","roles","role","roleId","isDefault","roleName","_hoisted_12","_component_RolesDialog","organization","type","user","$props","_component_OrganizationsDialog","organizations","_component_CustomConfirmDialog","item"],"sourceRoot":"","sources":["D:\\0. TaiPT\\2.Vue JS\\sakai-vue\\src\\view\\system-management\\user\\RoleAndOrganization.vue"],"sourcesContent":["<template>\r\n  <div class=\"role-organization\">\r\n    <h5>{{ `${t('userDetail.roleAndOrganization')}` }}</h5>\r\n    <div class=\"default-roles-container\">\r\n      <div class=\"flex justify-content-between align-items-center mt-5 mb-3\">\r\n        <label for=\"defaultRole\">{{ t('roleAndOrganization.defaultRole') }}</label>\r\n        <Button :label=\"t('select')\" @click=\"showRolesDialog\"/>\r\n      </div>\r\n      <!--      <Divider/>-->\r\n      <div class=\"list-default-roles\">\r\n        <DataTable v-if=\"defaultRoles.length\" :value=\"defaultRoles\" responsiveLayout=\"scroll\">\r\n          <Column :header=\"t('roleAndOrganization.defaultRole')\" field=\"roleName\"></Column>\r\n          <Column :header=\"t('actions')\">\r\n            <template #body=\"slotProps\">\r\n              <Button v-tooltip.top=\"t('delete')\" class=\"p-button-rounded p-button-danger p-button-text p-button-sm\"\r\n                      icon=\"pi pi-times\" @click=\"confirmRemoveDefaultRole(slotProps.data)\"/>\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n        <div v-else>\r\n          <label class=\"text-center block\">{{ t('emptyRecords', {itemName: t('role.name')}) }}</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"organization-container\">\r\n      <div class=\"flex justify-content-between align-items-center mt-5 mb-3\">\r\n        <label for=\"organizations\">{{ t('roleAndOrganization.organizations') }}</label>\r\n        <Button :label=\"t('select')\" @click=\"showOrganizationsDialog\"/>\r\n      </div>\r\n      <!--      <Divider/>-->\r\n      <div class=\"list-organization\">\r\n        <DataTable v-if=\"organizations.length\" :value=\"organizations\" responsiveLayout=\"scroll\">\r\n          <Column :header=\"t('roleAndOrganization.organizations')\" field=\"organizationName\"></Column>\r\n          <Column :header=\"t('roleAndOrganization.organizationRole')\">\r\n            <template #body=\"slotProps\">\r\n              <label v-for=\"role of slotProps.data.roles\">\r\n                <div v-if=\"role && role.roleId\" :class=\"{'organization-role-default' : role.isDefault}\"\r\n                     class=\"organization-role-chip border-none p-0 mr-3\">\r\n                  <Button v-tooltip.top=\"role.isDefault ? null : t('roleAndOrganization.setDefault')\"\r\n                          class=\"m-0 px-3\"\r\n                          @click=\"setDefaultOrganizationRole(slotProps.data, role)\">\r\n                    {{ role.roleName }}\r\n                  </Button>\r\n                  <Button\r\n                      v-if=\"!role.isDefault\"\r\n                      v-tooltip.top=\"role.isDefault ? null : t('delete')\"\r\n                      class=\"\"\r\n                      icon=\"pi pi-times\"\r\n                      @click=\"confirmRemoveOrganizationRole(slotProps.data, role)\"\r\n                  />\r\n                </div>\r\n              </label>\r\n            </template>\r\n          </Column>\r\n          <Column :header=\"t('actions')\">\r\n            <template #body=\"slotProps\">\r\n              <Button\r\n                  v-tooltip.top=\"t('roleAndOrganization.addRole')\"\r\n                  class=\"p-button-rounded p-button-text p-button-sm\"\r\n                  icon=\"pi pi-plus\"\r\n                  @click=\"showOrganizationRoleDialog(slotProps.data)\"\r\n              />\r\n              <Button v-tooltip.top=\"t('delete')\" class=\"p-button-rounded p-button-danger p-button-text p-button-sm\"\r\n                      icon=\"pi pi-times\" @click=\"confirmRemoveOrganization(slotProps.data)\"/>\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n        <div v-else>\r\n          <label class=\"text-center block\">{{ t('emptyRecords', {itemName: t('organization.name')}) }}</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <RolesDialog\r\n      v-if=\"rolesDialog\"\r\n      :default-roles=\"defaultRoles\"\r\n      :hide-dialogs=\"hideDialogs\"\r\n      :organization=\"organization\"\r\n      :roles-dialog=\"rolesDialog\"\r\n      :type=\"type\"\r\n      :update-role=\"updateRole\"\r\n      :user=\"user\"\r\n  />\r\n\r\n  <OrganizationsDialog\r\n      v-if=\"organizationsDialog\"\r\n      :hide-dialogs=\"hideDialogs\"\r\n      :organizations=\"organizations\"\r\n      :organizations-dialog=\"organizationsDialog\"\r\n      :update-organization=\"updateOrganization\"\r\n      :user=\"user\"\r\n  />\r\n\r\n  <CustomConfirmDialog\r\n      v-if=\"confirmDialog\"\r\n      :action-confirm=\"actionConfirm\"\r\n      :confirm-dialog=\"confirmDialog\"\r\n      :confirm-message=\"confirmMessage\"\r\n      :hide-dialogs=\"hideDialogs\"\r\n      :item=\"item\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport {useI18n} from 'vue-i18n';\r\nimport Constants from '/src/commons/Constants';\r\nimport RolesDialog from './dialogs/RolesDialog.vue';\r\nimport CustomConfirmDialog from \"/src/components/CustomConfirmDialog.vue\";\r\nimport OrganizationsDialog from \"./dialogs/OrganizationsDialog.vue\";\r\nimport {\r\n  defaultOrganizationRole,\r\n  getOrganizationRole,\r\n  leaveOrganization,\r\n  removeDefaultRole,\r\n  removeOrganizationRole\r\n} from \"/src/api/admin/userApi\";\r\nimport {toastError, toastSuccess, toastWarn} from \"/src/commons/ToastCustomService\";\r\n\r\nexport default {\r\n  name: \"RoleAndOrganization\",\r\n\r\n  data() {\r\n    return {\r\n      type: \"\",\r\n      organization: {},\r\n\r\n      defaultRoles: this.user.roles.filter(role => role.roleType === Constants.roleType.roleTypeDefault),\r\n      rolesDialog: false,\r\n\r\n      organizations: [],\r\n      organizationsDialog: false,\r\n\r\n      defaultOrganizationRoles: this.user.roles.filter(role => role.roleType === Constants.roleType.roleTypeOrganization),\r\n      defaultOrganizationRoleDialog: false,\r\n\r\n      confirmDialog: false,\r\n      confirmMessage: \"\",\r\n      item: {},\r\n      actionConfirm: () => {\r\n      }\r\n    }\r\n  },\r\n\r\n  setup() {\r\n    const {t} = useI18n();\r\n    return {t, Constants};\r\n  },\r\n\r\n  created() {\r\n    this.loadOrganizationRole();\r\n  },\r\n\r\n  methods: {\r\n    loadOrganizationRole() {\r\n      const api = getOrganizationRole({userId: this.user.id});\r\n      api.then((response) => {\r\n\r\n        this.organizations = response;\r\n      }).catch(() => {\r\n        toastError({});\r\n      });\r\n    },\r\n\r\n    updateRole(type, selectedRole) {\r\n      if (type === Constants.roleType.roleTypeDefault) {\r\n        this.defaultRoles.push(selectedRole);\r\n      } else if (type === Constants.roleType.roleTypeOrganization) {\r\n        if (!this.organization.roles) {\r\n          this.organization.roles = [];\r\n        }\r\n        this.organization.roles.push(selectedRole);\r\n        const organizationIndex = this.organizations.findIndex((item) => {\r\n          return item.organizationId === this.organization.organizationId;\r\n        });\r\n        this.organizations[organizationIndex] = this.organization;\r\n      }\r\n    },\r\n\r\n    confirmRemoveDefaultRole(role) {\r\n      this.confirmDialog = true;\r\n      this.confirmMessage = this.$t(\"roleAndOrganization.confirmRemoveDefaultRole\", {itemName: role.roleName});\r\n      this.actionConfirm = () => this.removeDefaultRole(role.roleId);\r\n    },\r\n\r\n    removeDefaultRole(roleId) {\r\n      const api = removeDefaultRole({\r\n        userId: this.user.id,\r\n        roleId\r\n      });\r\n\r\n      api.then(() => {\r\n        this.defaultRoles = this.defaultRoles.filter((role) =>\r\n            role.roleId !== roleId\r\n        );\r\n        this.hideDialogs();\r\n        toastSuccess({});\r\n      }).catch(() => {\r\n        toastError({});\r\n      });\r\n    },\r\n\r\n    updateOrganization(organization) {\r\n      this.organizations.push(organization);\r\n    },\r\n\r\n    confirmRemoveOrganization(organization) {\r\n      this.confirmDialog = true;\r\n      this.confirmMessage = this.$t(\"roleAndOrganization.confirmRemoveOrganization\", {itemName: organization.organizationName});\r\n      this.actionConfirm = () => this.removeOrganization(organization.organizationId);\r\n    },\r\n\r\n    showRolesDialog() {\r\n      this.type = Constants.roleType.roleTypeDefault;\r\n      this.rolesDialog = true;\r\n    },\r\n\r\n    showOrganizationRoleDialog(organization) {\r\n      this.type = Constants.roleType.roleTypeOrganization;\r\n      this.organization = organization;\r\n      this.rolesDialog = true;\r\n    },\r\n\r\n    showOrganizationsDialog() {\r\n      this.organizationsDialog = true;\r\n    },\r\n\r\n    setDefaultOrganizationRole(organization, role) {\r\n      if (role.isDefault) {\r\n        toastWarn({\r\n          message: this.$t(\"roleAndOrganization.roleAlreadyDefault\")\r\n        });\r\n        return;\r\n      }\r\n\r\n      const api = defaultOrganizationRole({\r\n        id: {\r\n          userId: this.user.id,\r\n          organizationId: organization.organizationId,\r\n          roleId: role.roleId\r\n        },\r\n        isDefault: true\r\n      });\r\n      api.then(() => {\r\n        this.organizations.forEach((org) => {\r\n          org.roles && org.roles.length && org.roles.forEach((r) => {\r\n            if (r.roleId === role.roleId && org.organizationId === organization.organizationId) {\r\n              r.isDefault = true\r\n            } else {\r\n              r.isDefault = false;\r\n            }\r\n          });\r\n        });\r\n        toastSuccess({});\r\n      }).catch(() => {\r\n        toastError({});\r\n      });\r\n    },\r\n\r\n    confirmRemoveOrganizationRole(organization, role) {\r\n      this.confirmDialog = true;\r\n      this.confirmMessage = this.$t(\"roleAndOrganization.confirmRemoveOrganizationRole\", {itemName: role.roleName});\r\n      this.actionConfirm = () => this.removeOrganizationRole(organization, role);\r\n    },\r\n\r\n    removeOrganizationRole(organization, role) {\r\n      const api = removeOrganizationRole({\r\n        id: {\r\n          userId: this.user.id,\r\n          organizationId: organization.organizationId,\r\n          roleId: role.roleId\r\n        },\r\n        isDefault: true\r\n      });\r\n      api.then(() => {\r\n        const {roles} = organization;\r\n        organization.roles = roles.filter((item) => {\r\n          return item.roleId !== role.roleId;\r\n        });\r\n        const organizationIndex = this.organizations.findIndex((item) => {\r\n          return item.organizationId === organization.organizationId;\r\n        });\r\n        this.organizations[organizationIndex] = organization;\r\n        this.hideDialogs();\r\n        toastSuccess({});\r\n      }).catch(() => {\r\n        toastError({});\r\n      });\r\n    },\r\n\r\n    removeOrganization(organizationId) {\r\n      const api = leaveOrganization({\r\n        id: {\r\n          userId: this.user.id,\r\n          organizationId: organizationId,\r\n          roleId: null\r\n        },\r\n        isDefault: false\r\n      });\r\n      api.then(() => {\r\n        const organizationIndex = this.organizations.findIndex((item) => {\r\n          return item.organizationId === organizationId;\r\n        });\r\n        this.organizations.splice(organizationIndex, 1);\r\n        this.hideDialogs();\r\n        toastSuccess({});\r\n      }).catch(() => {\r\n        toastError({});\r\n      });\r\n    },\r\n\r\n    hideDialogs() {\r\n      this.rolesDialog = false;\r\n      this.defaultOrganizationRoleDialog = false;\r\n      this.confirmDialog = false;\r\n      this.organizationsDialog = false;\r\n    }\r\n  },\r\n\r\n  components: {\r\n    RolesDialog,\r\n    OrganizationsDialog,\r\n    CustomConfirmDialog\r\n  },\r\n\r\n  props: ['user']\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}