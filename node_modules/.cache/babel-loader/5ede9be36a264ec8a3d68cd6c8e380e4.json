{"ast":null,"code":"import { getUserMenu } from \"../../api/user/menuApi\";\nexport default {\n  namespaced: true,\n  state: {\n    menus: null\n  },\n  getters: {},\n  mutations: {\n    setMenus(state, menus) {\n      state.menus = menus;\n    }\n\n  },\n  actions: {\n    async loadUserMenus(context) {\n      if (context.state.menus === null) {\n        const user = context.rootState.auth.user;\n\n        if (user) {\n          let defaultRole;\n          let roleId;\n          console.log(user);\n\n          if (user.organizationRoles && user.organizationRoles.length) {\n            defaultRole = user.organizationRoles.find(role => role.isDefault === true);\n\n            if (defaultRole) {\n              roleId = defaultRole.roleId;\n            } else {\n              roleId = user.organizationRoles[0].roleId;\n            }\n          } else {\n            roleId = 0;\n          }\n\n          roleId = roleId == null ? 0 : roleId;\n          await getUserMenu(roleId).then(data => {\n            if (!Array.isArray(data)) {\n              data = [];\n            }\n\n            context.commit('setMenus', data);\n          });\n        }\n      }\n    },\n\n    setUserMenus(context, data) {\n      context.commit('setMenus', data);\n    },\n\n    clearUserMenu(context) {\n      context.commit('setMenus', null);\n    }\n\n  }\n};","map":{"version":3,"names":["getUserMenu","namespaced","state","menus","getters","mutations","setMenus","actions","loadUserMenus","context","user","rootState","auth","defaultRole","roleId","console","log","organizationRoles","length","find","role","isDefault","then","data","Array","isArray","commit","setUserMenus","clearUserMenu"],"sources":["D:/0. TaiPT/2.Vue JS/sakai-vue/src/store/modules/menus.js"],"sourcesContent":["import {getUserMenu} from \"../../api/user/menuApi\";\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state: {\r\n        menus: null,\r\n    },\r\n    getters: {},\r\n    mutations: {\r\n        setMenus(state, menus) {\r\n            state.menus = menus;\r\n        },\r\n\r\n    },\r\n    actions: {\r\n        async loadUserMenus(context) {\r\n            if (context.state.menus === null) {\r\n                const user = context.rootState.auth.user\r\n                if (user) {\r\n                    let defaultRole;\r\n                    let roleId;\r\n                    console.log(user)\r\n                    if (user.organizationRoles && user.organizationRoles.length) {\r\n                        defaultRole = user.organizationRoles.find(role => role.isDefault === true);\r\n                        if (defaultRole) {\r\n                            roleId = defaultRole.roleId;\r\n                        } else {\r\n                            roleId = user.organizationRoles[0].roleId;\r\n                        }\r\n                    } else {\r\n                        roleId = 0\r\n                    }\r\n                    roleId = roleId == null ? 0 : roleId;\r\n                    await getUserMenu(roleId)\r\n                        .then(data => {\r\n                            if (!Array.isArray(data)) {\r\n                                data = [];\r\n                            }\r\n                            context.commit('setMenus', data)\r\n                        })\r\n                }\r\n            }\r\n        },\r\n        setUserMenus(context, data) {\r\n            context.commit('setMenus', data)\r\n        },\r\n        clearUserMenu(context) {\r\n            context.commit('setMenus', null);\r\n        }\r\n    }\r\n}"],"mappings":"AAAA,SAAQA,WAAR,QAA0B,wBAA1B;AAEA,eAAe;EACXC,UAAU,EAAE,IADD;EAEXC,KAAK,EAAE;IACHC,KAAK,EAAE;EADJ,CAFI;EAKXC,OAAO,EAAE,EALE;EAMXC,SAAS,EAAE;IACPC,QAAQ,CAACJ,KAAD,EAAQC,KAAR,EAAe;MACnBD,KAAK,CAACC,KAAN,GAAcA,KAAd;IACH;;EAHM,CANA;EAYXI,OAAO,EAAE;IACL,MAAMC,aAAN,CAAoBC,OAApB,EAA6B;MACzB,IAAIA,OAAO,CAACP,KAAR,CAAcC,KAAd,KAAwB,IAA5B,EAAkC;QAC9B,MAAMO,IAAI,GAAGD,OAAO,CAACE,SAAR,CAAkBC,IAAlB,CAAuBF,IAApC;;QACA,IAAIA,IAAJ,EAAU;UACN,IAAIG,WAAJ;UACA,IAAIC,MAAJ;UACAC,OAAO,CAACC,GAAR,CAAYN,IAAZ;;UACA,IAAIA,IAAI,CAACO,iBAAL,IAA0BP,IAAI,CAACO,iBAAL,CAAuBC,MAArD,EAA6D;YACzDL,WAAW,GAAGH,IAAI,CAACO,iBAAL,CAAuBE,IAAvB,CAA4BC,IAAI,IAAIA,IAAI,CAACC,SAAL,KAAmB,IAAvD,CAAd;;YACA,IAAIR,WAAJ,EAAiB;cACbC,MAAM,GAAGD,WAAW,CAACC,MAArB;YACH,CAFD,MAEO;cACHA,MAAM,GAAGJ,IAAI,CAACO,iBAAL,CAAuB,CAAvB,EAA0BH,MAAnC;YACH;UACJ,CAPD,MAOO;YACHA,MAAM,GAAG,CAAT;UACH;;UACDA,MAAM,GAAGA,MAAM,IAAI,IAAV,GAAiB,CAAjB,GAAqBA,MAA9B;UACA,MAAMd,WAAW,CAACc,MAAD,CAAX,CACDQ,IADC,CACIC,IAAI,IAAI;YACV,IAAI,CAACC,KAAK,CAACC,OAAN,CAAcF,IAAd,CAAL,EAA0B;cACtBA,IAAI,GAAG,EAAP;YACH;;YACDd,OAAO,CAACiB,MAAR,CAAe,UAAf,EAA2BH,IAA3B;UACH,CANC,CAAN;QAOH;MACJ;IACJ,CA5BI;;IA6BLI,YAAY,CAAClB,OAAD,EAAUc,IAAV,EAAgB;MACxBd,OAAO,CAACiB,MAAR,CAAe,UAAf,EAA2BH,IAA3B;IACH,CA/BI;;IAgCLK,aAAa,CAACnB,OAAD,EAAU;MACnBA,OAAO,CAACiB,MAAR,CAAe,UAAf,EAA2B,IAA3B;IACH;;EAlCI;AAZE,CAAf"},"metadata":{},"sourceType":"module"}