{"ast":null,"code":"import { FilterMatchMode } from 'primevue/api';\nimport ProductService from '../service/ProductService';\nimport UserService from '../service/UsersService';\nexport default {\n  data() {\n    return {\n      products: null,\n      productDialog: false,\n      deleteProductDialog: false,\n      deleteProductsDialog: false,\n      product: {},\n      selectedProducts: null,\n      filters: {},\n      submitted: false,\n      statuses: [{\n        label: 'INSTOCK',\n        value: 'instock'\n      }, {\n        label: 'LOWSTOCK',\n        value: 'lowstock'\n      }, {\n        label: 'OUTOFSTOCK',\n        value: 'outofstock'\n      }],\n      users: null,\n      userDialog: false,\n      deleteUserDialog: false,\n      deleteUsersDialog: false,\n      user: {},\n      selectedUsers: null,\n      filtersUser: {},\n      submittedUser: false,\n      statusesUser: [{\n        label: 'INSTOCK',\n        value: 'instock'\n      }, {\n        label: 'LOWSTOCK',\n        value: 'lowstock'\n      }, {\n        label: 'OUTOFSTOCK',\n        value: 'outofstock'\n      }]\n    };\n  },\n\n  productService: null,\n\n  created() {\n    this.productService = new ProductService();\n    this.userService = new UserService();\n    this.initFilters();\n  },\n\n  mounted() {\n    this.productService.getProducts().then(data => this.products = data);\n    this.userService.getUser().then(data => this.users = data);\n  },\n\n  methods: {\n    formatCurrency(value) {\n      if (value) return value.toLocaleString('en-US', {\n        style: 'currency',\n        currency: 'USD'\n      });\n      return;\n    },\n\n    openNew() {\n      this.product = {};\n      this.submitted = false;\n      this.productDialog = true;\n    },\n\n    hideDialog() {\n      this.productDialog = false;\n      this.submitted = false;\n    },\n\n    saveProduct() {\n      this.submitted = true;\n\n      if (this.product.name.trim()) {\n        if (this.product.id) {\n          this.product.inventoryStatus = this.product.inventoryStatus.value ? this.product.inventoryStatus.value : this.product.inventoryStatus;\n          this.products[this.findIndexById(this.product.id)] = this.product;\n          this.$toast.add({\n            severity: 'success',\n            summary: 'Successful',\n            detail: 'Product Updated',\n            life: 3000\n          });\n        } else {\n          this.product.id = this.createId();\n          this.product.code = this.createId();\n          this.product.image = 'product-placeholder.svg';\n          this.product.inventoryStatus = this.product.inventoryStatus ? this.product.inventoryStatus.value : 'INSTOCK';\n          this.products.push(this.product);\n          this.$toast.add({\n            severity: 'success',\n            summary: 'Successful',\n            detail: 'Product Created',\n            life: 3000\n          });\n        }\n\n        this.productDialog = false;\n        this.product = {};\n      }\n    },\n\n    editProduct(product) {\n      this.product = { ...product\n      };\n      this.productDialog = true;\n    },\n\n    confirmDeleteProduct(product) {\n      this.product = product;\n      this.deleteProductDialog = true;\n    },\n\n    deleteProduct() {\n      this.products = this.products.filter(val => val.id !== this.product.id);\n      this.deleteProductDialog = false;\n      this.product = {};\n      this.$toast.add({\n        severity: 'success',\n        summary: 'Successful',\n        detail: 'Product Deleted',\n        life: 3000\n      });\n    },\n\n    findIndexById(id) {\n      let index = -1;\n\n      for (let i = 0; i < this.products.length; i++) {\n        if (this.products[i].id === id) {\n          index = i;\n          break;\n        }\n      }\n\n      return index;\n    },\n\n    createId() {\n      let id = '';\n      var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n      for (var i = 0; i < 5; i++) {\n        id += chars.charAt(Math.floor(Math.random() * chars.length));\n      }\n\n      return id;\n    },\n\n    exportCSV() {\n      this.$refs.dt.exportCSV();\n    },\n\n    confirmDeleteSelected() {\n      this.deleteProductsDialog = true;\n    },\n\n    deleteSelectedProducts() {\n      this.products = this.products.filter(val => !this.selectedProducts.includes(val));\n      this.deleteProductsDialog = false;\n      this.selectedProducts = null;\n      this.$toast.add({\n        severity: 'success',\n        summary: 'Successful',\n        detail: 'Products Deleted',\n        life: 3000\n      });\n    },\n\n    initFilters() {\n      this.filters = {\n        'global': {\n          value: null,\n          matchMode: FilterMatchMode.CONTAINS\n        }\n      };\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["FilterMatchMode","ProductService","UserService","data","products","productDialog","deleteProductDialog","deleteProductsDialog","product","selectedProducts","filters","submitted","statuses","label","value","users","userDialog","deleteUserDialog","deleteUsersDialog","user","selectedUsers","filtersUser","submittedUser","statusesUser","productService","created","userService","initFilters","mounted","getProducts","then","getUser","methods","formatCurrency","toLocaleString","style","currency","openNew","hideDialog","saveProduct","name","trim","id","inventoryStatus","findIndexById","$toast","add","severity","summary","detail","life","createId","code","image","push","editProduct","confirmDeleteProduct","deleteProduct","filter","val","index","i","length","chars","charAt","Math","floor","random","exportCSV","$refs","dt","confirmDeleteSelected","deleteSelectedProducts","includes","matchMode","CONTAINS"],"sourceRoot":"","sources":["D:\\0. TaiPT\\2.Vue JS\\sakai-vue\\src\\pages\\CrudDemo.vue"],"sourcesContent":["<template>\r\n  <div class=\"grid\">\r\n    <div class=\"col-12\">\r\n      <div class=\"card\">\r\n        <Toast/>\r\n        <Toolbar class=\"mb-4\">\r\n          <template v-slot:start>\r\n            <div class=\"my-2\">\r\n              <Button label=\"New\" icon=\"pi pi-plus\" class=\"p-button-success mr-2\" @click=\"openNew\" />\r\n              <Button label=\"Delete\" icon=\"pi pi-trash\" class=\"p-button-danger\" @click=\"confirmDeleteSelected\" :disabled=\"!selectedProducts || !selectedProducts.length\" />\r\n            </div>\r\n          </template>\r\n\r\n          <template v-slot:end>\r\n            <FileUpload mode=\"basic\" accept=\"image/*\" :maxFileSize=\"1000000\" label=\"Import\" chooseLabel=\"Import\" class=\"mr-2 inline-block\" />\r\n            <Button label=\"Export\" icon=\"pi pi-upload\" class=\"p-button-help\" @click=\"exportCSV($event)\"  />\r\n          </template>\r\n        </Toolbar>\r\n\r\n<!--        ProductTable-->\r\n\r\n        <DataTable ref=\"dt\" :value=\"products\" v-model:selection=\"selectedProducts\" dataKey=\"id\" :paginator=\"true\" :rows=\"10\" :filters=\"filters\"\r\n                   paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\" :rowsPerPageOptions=\"[5,10,25]\"\r\n                   currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} products\" responsiveLayout=\"scroll\">\r\n          <template #header>\r\n            <div class=\"flex flex-column md:flex-row md:justify-content-between md:align-items-center\">\r\n              <h5 class=\"m-0\">Manage Products</h5>\r\n              <span class=\"block mt-2 md:mt-0 p-input-icon-left\">\r\n                                <i class=\"pi pi-search\" />\r\n                                <InputText v-model=\"filters['global'].value\" placeholder=\"Search...\" />\r\n                            </span>\r\n            </div>\r\n          </template>\r\n\r\n          <Column selectionMode=\"multiple\" headerStyle=\"width: 3rem\"></Column>\r\n          <Column field=\"code\" header=\"Code\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Code</span>\r\n              {{slotProps.data.code}}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"name\" header=\"Name\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Name</span>\r\n              {{slotProps.data.name}}\r\n            </template>\r\n          </Column>\r\n          <Column header=\"Image\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Image</span>\r\n              <img :src=\"'images/product/' + slotProps.data.image\" :alt=\"slotProps.data.image\" class=\"shadow-2\" width=\"100\" />\r\n            </template>\r\n          </Column>\r\n          <Column field=\"price\" header=\"Price\" :sortable=\"true\" headerStyle=\"width:14%; min-width:8rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Price</span>\r\n              {{formatCurrency(slotProps.data.price)}}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"category\" header=\"Category\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Category</span>\r\n              {{formatCurrency(slotProps.data.category)}}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"rating\" header=\"Reviews\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Rating</span>\r\n              <Rating :modelValue=\"slotProps.data.rating\" :readonly=\"true\" :cancel=\"false\" />\r\n            </template>\r\n          </Column>\r\n          <Column field=\"inventoryStatus\" header=\"Status\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Status</span>\r\n              <span :class=\"'product-badge status-' + (slotProps.data.inventoryStatus ? slotProps.data.inventoryStatus.toLowerCase() : '')\">{{slotProps.data.inventoryStatus}}</span>\r\n            </template>\r\n          </Column>\r\n          <Column headerStyle=\"min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <Button icon=\"pi pi-pencil\" class=\"p-button-rounded p-button-success mr-2\" @click=\"editProduct(slotProps.data)\" />\r\n              <Button icon=\"pi pi-trash\" class=\"p-button-rounded p-button-warning mt-2\" @click=\"confirmDeleteProduct(slotProps.data)\" />\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n\r\n<!--        UserTable-->\r\n\r\n<!--        <DataTable ref=\"dt\" :value=\"users\" v-model:selection=\"selectedUsers\" dataKey=\"id\" :paginator=\"true\" :rows=\"10\" :filters=\"filtersUser\"-->\r\n<!--                   paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\" :rowsPerPageOptions=\"[5,10,25]\"-->\r\n<!--                   currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} products\" responsiveLayout=\"scroll\">-->\r\n<!--          <template #header>-->\r\n<!--            <div class=\"flex flex-column md:flex-row md:justify-content-between md:align-items-center\">-->\r\n<!--              <h5 class=\"m-0\">Manage Users</h5>-->\r\n<!--              <span class=\"block mt-2 md:mt-0 p-input-icon-left\">-->\r\n<!--                                <i class=\"pi pi-search\" />-->\r\n<!--                                <InputText v-model=\"filtersUser['global'].value\" placeholder=\"Search...\" />-->\r\n<!--                            </span>-->\r\n<!--            </div>-->\r\n<!--          </template>-->\r\n\r\n        <DataTable ref=\"dt\" >\r\n          <template >\r\n            <div class=\"flex flex-column md:flex-row md:justify-content-between md:align-items-center\">\r\n              <h5 class=\"m-0\">Manage Products</h5>\r\n              <span class=\"block mt-2 md:mt-0 p-input-icon-left\">\r\n                                <i class=\"pi pi-search\" />\r\n                                <InputText  placeholder=\"Search...\" />\r\n                            </span>\r\n            </div>\r\n          </template>\r\n\r\n          <Column selectionMode=\"multiple\" headerStyle=\"width: 3rem\"></Column>\r\n          <Column field=\"code\" header=\"Code\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Code</span>\r\n              {{slotProps.data.code}}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"name\" header=\"Name\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Name</span>\r\n              {{slotProps.data.name}}\r\n            </template>\r\n          </Column>\r\n          <Column header=\"Image\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Image</span>\r\n              <img :src=\"'images/product/' + slotProps.data.image\" :alt=\"slotProps.data.image\" class=\"shadow-2\" width=\"100\" />\r\n            </template>\r\n          </Column>\r\n          <Column field=\"price\" header=\"Price\" :sortable=\"true\" headerStyle=\"width:14%; min-width:8rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Price</span>\r\n              {{formatCurrency(slotProps.data.price)}}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"category\" header=\"Category\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Category</span>\r\n              {{formatCurrency(slotProps.data.category)}}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"rating\" header=\"Reviews\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Rating</span>\r\n              <Rating :modelValue=\"slotProps.data.rating\" :readonly=\"true\" :cancel=\"false\" />\r\n            </template>\r\n          </Column>\r\n          <Column field=\"inventoryStatus\" header=\"Status\" :sortable=\"true\" headerStyle=\"width:14%; min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <span class=\"p-column-title\">Status</span>\r\n              <span :class=\"'product-badge status-' + (slotProps.data.inventoryStatus ? slotProps.data.inventoryStatus.toLowerCase() : '')\">{{slotProps.data.inventoryStatus}}</span>\r\n            </template>\r\n          </Column>\r\n          <Column headerStyle=\"min-width:10rem;\">\r\n            <template #body=\"slotProps\">\r\n              <Button icon=\"pi pi-pencil\" class=\"p-button-rounded p-button-success mr-2\" @click=\"editProduct(slotProps.data)\" />\r\n              <Button icon=\"pi pi-trash\" class=\"p-button-rounded p-button-warning mt-2\" @click=\"confirmDeleteProduct(slotProps.data)\" />\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n\r\n        <Dialog v-model:visible=\"productDialog\" :style=\"{width: '450px'}\" header=\"Product Details\" :modal=\"true\" class=\"p-fluid\">\r\n          <img :src=\"'images/product/' + product.image\" :alt=\"product.image\" v-if=\"product.image\" width=\"150\" class=\"mt-0 mx-auto mb-5 block shadow-2\" />\r\n          <div class=\"field\">\r\n            <label for=\"name\">Name</label>\r\n            <InputText id=\"name\" v-model.trim=\"product.name\" required=\"true\" autofocus :class=\"{'p-invalid': submitted && !product.name}\" />\r\n            <small class=\"p-invalid\" v-if=\"submitted && !product.name\">Name is required.</small>\r\n          </div>\r\n          <div class=\"field\">\r\n            <label for=\"description\">Description</label>\r\n            <Textarea id=\"description\" v-model=\"product.description\" required=\"true\" rows=\"3\" cols=\"20\" />\r\n          </div>\r\n\r\n          <div class=\"field\">\r\n            <label for=\"inventoryStatus\" class=\"mb-3\">Inventory Status</label>\r\n            <Dropdown id=\"inventoryStatus\" v-model=\"product.inventoryStatus\" :options=\"statuses\" optionLabel=\"label\" placeholder=\"Select a Status\">\r\n              <template #value=\"slotProps\">\r\n                <div v-if=\"slotProps.value && slotProps.value.value\">\r\n                  <span :class=\"'product-badge status-' +slotProps.value.value\">{{slotProps.value.label}}</span>\r\n                </div>\r\n                <div v-else-if=\"slotProps.value && !slotProps.value.value\">\r\n                  <span :class=\"'product-badge status-' +slotProps.value.toLowerCase()\">{{slotProps.value}}</span>\r\n                </div>\r\n                <span v-else>\r\n\t\t\t\t\t\t\t\t\t{{slotProps.placeholder}}\r\n\t\t\t\t\t\t\t\t</span>\r\n              </template>\r\n            </Dropdown>\r\n          </div>\r\n\r\n          <div class=\"field\">\r\n            <label class=\"mb-3\">Category</label>\r\n            <div class=\"formgrid grid\">\r\n              <div class=\"field-radiobutton col-6\">\r\n                <RadioButton id=\"category1\" name=\"category\" value=\"Accessories\" v-model=\"product.category\" />\r\n                <label for=\"category1\">Accessories</label>\r\n              </div>\r\n              <div class=\"field-radiobutton col-6\">\r\n                <RadioButton id=\"category2\" name=\"category\" value=\"Clothing\" v-model=\"product.category\" />\r\n                <label for=\"category2\">Clothing</label>\r\n              </div>\r\n              <div class=\"field-radiobutton col-6\">\r\n                <RadioButton id=\"category3\" name=\"category\" value=\"Electronics\" v-model=\"product.category\" />\r\n                <label for=\"category3\">Electronics</label>\r\n              </div>\r\n              <div class=\"field-radiobutton col-6\">\r\n                <RadioButton id=\"category4\" name=\"category\" value=\"Fitness\" v-model=\"product.category\" />\r\n                <label for=\"category4\">Fitness</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"formgrid grid\">\r\n            <div class=\"field col\">\r\n              <label for=\"price\">Price</label>\r\n              <InputNumber id=\"price\" v-model=\"product.price\" mode=\"currency\" currency=\"USD\" locale=\"en-US\" />\r\n            </div>\r\n            <div class=\"field col\">\r\n              <label for=\"quantity\">Quantity</label>\r\n              <InputNumber id=\"quantity\" v-model=\"product.quantity\" integeronly />\r\n            </div>\r\n          </div>\r\n          <template #footer>\r\n            <Button label=\"Cancel\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"hideDialog\"/>\r\n            <Button label=\"Save\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"saveProduct\" />\r\n          </template>\r\n        </Dialog>\r\n\r\n        <Dialog v-model:visible=\"deleteProductDialog\" :style=\"{width: '450px'}\" header=\"Confirm\" :modal=\"true\">\r\n          <div class=\"flex align-items-center justify-content-center\">\r\n            <i class=\"pi pi-exclamation-triangle mr-3\" style=\"font-size: 2rem\" />\r\n            <span v-if=\"product\">Are you sure you want to delete <b>{{product.name}}</b>?</span>\r\n          </div>\r\n          <template #footer>\r\n            <Button label=\"No\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"deleteProductDialog = false\"/>\r\n            <Button label=\"Yes\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"deleteProduct\" />\r\n          </template>\r\n        </Dialog>\r\n\r\n        <Dialog v-model:visible=\"deleteProductsDialog\" :style=\"{width: '450px'}\" header=\"Confirm\" :modal=\"true\">\r\n          <div class=\"flex align-items-center justify-content-center\">\r\n            <i class=\"pi pi-exclamation-triangle mr-3\" style=\"font-size: 2rem\" />\r\n            <span v-if=\"product\">Are you sure you want to delete the selected products?</span>\r\n          </div>\r\n          <template #footer>\r\n            <Button label=\"No\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"deleteProductsDialog = false\"/>\r\n            <Button label=\"Yes\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"deleteSelectedProducts\" />\r\n          </template>\r\n        </Dialog>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {FilterMatchMode} from 'primevue/api';\r\nimport ProductService from '../service/ProductService';\r\nimport UserService from '../service/UsersService';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: null,\r\n      productDialog: false,\r\n      deleteProductDialog: false,\r\n      deleteProductsDialog: false,\r\n      product: {},\r\n      selectedProducts: null,\r\n      filters: {},\r\n      submitted: false,\r\n      statuses: [\r\n        {label: 'INSTOCK', value: 'instock'},\r\n        {label: 'LOWSTOCK', value: 'lowstock'},\r\n        {label: 'OUTOFSTOCK', value: 'outofstock'}\r\n      ],\r\n\r\n      users: null,\r\n      userDialog: false,\r\n      deleteUserDialog: false,\r\n      deleteUsersDialog: false,\r\n      user: {},\r\n      selectedUsers: null,\r\n      filtersUser: {},\r\n      submittedUser: false,\r\n      statusesUser: [\r\n        {label: 'INSTOCK', value: 'instock'},\r\n        {label: 'LOWSTOCK', value: 'lowstock'},\r\n        {label: 'OUTOFSTOCK', value: 'outofstock'}\r\n      ]\r\n    }\r\n  },\r\n  productService: null,\r\n  created() {\r\n    this.productService = new ProductService();\r\n    this.userService = new UserService();\r\n    this.initFilters();\r\n  },\r\n  mounted() {\r\n    this.productService.getProducts().then(data => this.products = data);\r\n    this.userService.getUser().then(data => this.users = data);\r\n  },\r\n  methods: {\r\n    formatCurrency(value) {\r\n      if(value)\r\n        return value.toLocaleString('en-US', {style: 'currency', currency: 'USD'});\r\n      return;\r\n    },\r\n    openNew() {\r\n      this.product = {};\r\n      this.submitted = false;\r\n      this.productDialog = true;\r\n    },\r\n    hideDialog() {\r\n      this.productDialog = false;\r\n      this.submitted = false;\r\n    },\r\n    saveProduct() {\r\n      this.submitted = true;\r\n      if (this.product.name.trim()) {\r\n        if (this.product.id) {\r\n          this.product.inventoryStatus = this.product.inventoryStatus.value ? this.product.inventoryStatus.value: this.product.inventoryStatus;\r\n          this.products[this.findIndexById(this.product.id)] = this.product;\r\n          this.$toast.add({severity:'success', summary: 'Successful', detail: 'Product Updated', life: 3000});\r\n        }\r\n        else {\r\n          this.product.id = this.createId();\r\n          this.product.code = this.createId();\r\n          this.product.image = 'product-placeholder.svg';\r\n          this.product.inventoryStatus = this.product.inventoryStatus ? this.product.inventoryStatus.value : 'INSTOCK';\r\n          this.products.push(this.product);\r\n          this.$toast.add({severity:'success', summary: 'Successful', detail: 'Product Created', life: 3000});\r\n        }\r\n        this.productDialog = false;\r\n        this.product = {};\r\n      }\r\n    },\r\n    editProduct(product) {\r\n      this.product = {...product};\r\n      this.productDialog = true;\r\n    },\r\n    confirmDeleteProduct(product) {\r\n      this.product = product;\r\n      this.deleteProductDialog = true;\r\n    },\r\n    deleteProduct() {\r\n      this.products = this.products.filter(val => val.id !== this.product.id);\r\n      this.deleteProductDialog = false;\r\n      this.product = {};\r\n      this.$toast.add({severity:'success', summary: 'Successful', detail: 'Product Deleted', life: 3000});\r\n    },\r\n    findIndexById(id) {\r\n      let index = -1;\r\n      for (let i = 0; i < this.products.length; i++) {\r\n        if (this.products[i].id === id) {\r\n          index = i;\r\n          break;\r\n        }\r\n      }\r\n      return index;\r\n    },\r\n    createId() {\r\n      let id = '';\r\n      var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n      for ( var i = 0; i < 5; i++ ) {\r\n        id += chars.charAt(Math.floor(Math.random() * chars.length));\r\n      }\r\n      return id;\r\n    },\r\n    exportCSV() {\r\n      this.$refs.dt.exportCSV();\r\n    },\r\n    confirmDeleteSelected() {\r\n      this.deleteProductsDialog = true;\r\n    },\r\n    deleteSelectedProducts() {\r\n      this.products = this.products.filter(val => !this.selectedProducts.includes(val));\r\n      this.deleteProductsDialog = false;\r\n      this.selectedProducts = null;\r\n      this.$toast.add({severity:'success', summary: 'Successful', detail: 'Products Deleted', life: 3000});\r\n    },\r\n    initFilters() {\r\n      this.filters = {\r\n        'global': {value: null, matchMode: FilterMatchMode.CONTAINS},\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '../assets/demo/badges.scss';\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}