{"ast":null,"code":"import { FilterMatchMode } from 'primevue/api';\nimport ProductService from '../service/ProductService';\nexport default {\n  data() {\n    return {\n      products: null,\n      productDialog: false,\n      deleteProductDialog: false,\n      deleteProductsDialog: false,\n      product: {},\n      selectedProducts: null,\n      filters: {},\n      submitted: false,\n      statuses: [{\n        label: 'INSTOCK',\n        value: 'instock'\n      }, {\n        label: 'LOWSTOCK',\n        value: 'lowstock'\n      }, {\n        label: 'OUTOFSTOCK',\n        value: 'outofstock'\n      }]\n    };\n  },\n\n  productService: null,\n\n  created() {\n    this.productService = new ProductService();\n    this.initFilters();\n  },\n\n  mounted() {\n    this.productService.getProducts().then(data => this.products = data);\n  },\n\n  methods: {\n    formatCurrency(value) {\n      if (value) return value.toLocaleString('en-US', {\n        style: 'currency',\n        currency: 'USD'\n      });\n      return;\n    },\n\n    openNew() {\n      this.product = {};\n      this.submitted = false;\n      this.productDialog = true;\n    },\n\n    hideDialog() {\n      this.productDialog = false;\n      this.submitted = false;\n    },\n\n    saveProduct() {\n      this.submitted = true;\n\n      if (this.product.name.trim()) {\n        if (this.product.id) {\n          this.product.inventoryStatus = this.product.inventoryStatus.value ? this.product.inventoryStatus.value : this.product.inventoryStatus;\n          this.products[this.findIndexById(this.product.id)] = this.product;\n          this.$toast.add({\n            severity: 'success',\n            summary: 'Successful',\n            detail: 'Product Updated',\n            life: 3000\n          });\n        } else {\n          this.product.id = this.createId();\n          this.product.code = this.createId();\n          this.product.image = 'product-placeholder.svg';\n          this.product.inventoryStatus = this.product.inventoryStatus ? this.product.inventoryStatus.value : 'INSTOCK';\n          this.products.push(this.product);\n          this.$toast.add({\n            severity: 'success',\n            summary: 'Successful',\n            detail: 'Product Created',\n            life: 3000\n          });\n        }\n\n        this.productDialog = false;\n        this.product = {};\n      }\n    },\n\n    editProduct(product) {\n      this.product = { ...product\n      };\n      this.productDialog = true;\n    },\n\n    confirmDeleteProduct(product) {\n      this.product = product;\n      this.deleteProductDialog = true;\n    },\n\n    deleteProduct() {\n      this.products = this.products.filter(val => val.id !== this.product.id);\n      this.deleteProductDialog = false;\n      this.product = {};\n      this.$toast.add({\n        severity: 'success',\n        summary: 'Successful',\n        detail: 'Product Deleted',\n        life: 3000\n      });\n    },\n\n    findIndexById(id) {\n      let index = -1;\n\n      for (let i = 0; i < this.products.length; i++) {\n        if (this.products[i].id === id) {\n          index = i;\n          break;\n        }\n      }\n\n      return index;\n    },\n\n    createId() {\n      let id = '';\n      var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n      for (var i = 0; i < 5; i++) {\n        id += chars.charAt(Math.floor(Math.random() * chars.length));\n      }\n\n      return id;\n    },\n\n    exportCSV() {\n      this.$refs.dt.exportCSV();\n    },\n\n    confirmDeleteSelected() {\n      this.deleteProductsDialog = true;\n    },\n\n    deleteSelectedProducts() {\n      this.products = this.products.filter(val => !this.selectedProducts.includes(val));\n      this.deleteProductsDialog = false;\n      this.selectedProducts = null;\n      this.$toast.add({\n        severity: 'success',\n        summary: 'Successful',\n        detail: 'Products Deleted',\n        life: 3000\n      });\n    },\n\n    initFilters() {\n      this.filters = {\n        'global': {\n          value: null,\n          matchMode: FilterMatchMode.CONTAINS\n        }\n      };\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["FilterMatchMode","ProductService","data","products","productDialog","deleteProductDialog","deleteProductsDialog","product","selectedProducts","filters","submitted","statuses","label","value","productService","created","initFilters","mounted","getProducts","then","methods","formatCurrency","toLocaleString","style","currency","openNew","hideDialog","saveProduct","name","trim","id","inventoryStatus","findIndexById","$toast","add","severity","summary","detail","life","createId","code","image","push","editProduct","confirmDeleteProduct","deleteProduct","filter","val","index","i","length","chars","charAt","Math","floor","random","exportCSV","$refs","dt","confirmDeleteSelected","deleteSelectedProducts","includes","matchMode","CONTAINS"],"sourceRoot":"","sources":["D:\\0. TaiPT\\2.Vue JS\\sakai-vue\\src\\pages\\CrudDemo.vue"],"sourcesContent":["<template>\r\n  <div class=\"grid\">\r\n    <div class=\"col-12\">\r\n      <div class=\"card\">\r\n        <Toast/>\r\n        <Toolbar class=\"mb-4\">\r\n          <template v-slot:start>\r\n            <div class=\"my-2\">\r\n              <Button label=\"New\" icon=\"pi pi-plus\" class=\"p-button-success mr-2\" @click=\"openNew\" />\r\n              <Button label=\"Delete\" icon=\"pi pi-trash\" class=\"p-button-danger\" @click=\"confirmDeleteSelected\" :disabled=\"!selectedProducts || !selectedProducts.length\" />\r\n            </div>\r\n          </template>\r\n\r\n          <template v-slot:end>\r\n            <FileUpload mode=\"basic\" accept=\"image/*\" :maxFileSize=\"1000000\" label=\"Import\" chooseLabel=\"Import\" class=\"mr-2 inline-block\" />\r\n            <Button label=\"Export\" icon=\"pi pi-upload\" class=\"p-button-help\" @click=\"exportCSV($event)\"  />\r\n          </template>\r\n        </Toolbar>\r\n\r\n        \r\n\r\n\r\n\r\n\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {FilterMatchMode} from 'primevue/api';\r\nimport ProductService from '../service/ProductService';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: null,\r\n      productDialog: false,\r\n      deleteProductDialog: false,\r\n      deleteProductsDialog: false,\r\n      product: {},\r\n      selectedProducts: null,\r\n      filters: {},\r\n      submitted: false,\r\n      statuses: [\r\n        {label: 'INSTOCK', value: 'instock'},\r\n        {label: 'LOWSTOCK', value: 'lowstock'},\r\n        {label: 'OUTOFSTOCK', value: 'outofstock'}\r\n      ]\r\n    }\r\n  },\r\n  productService: null,\r\n  created() {\r\n    this.productService = new ProductService();\r\n    this.initFilters();\r\n  },\r\n  mounted() {\r\n    this.productService.getProducts().then(data => this.products = data);\r\n  },\r\n  methods: {\r\n    formatCurrency(value) {\r\n      if(value)\r\n        return value.toLocaleString('en-US', {style: 'currency', currency: 'USD'});\r\n      return;\r\n    },\r\n    openNew() {\r\n      this.product = {};\r\n      this.submitted = false;\r\n      this.productDialog = true;\r\n    },\r\n    hideDialog() {\r\n      this.productDialog = false;\r\n      this.submitted = false;\r\n    },\r\n    saveProduct() {\r\n      this.submitted = true;\r\n      if (this.product.name.trim()) {\r\n        if (this.product.id) {\r\n          this.product.inventoryStatus = this.product.inventoryStatus.value ? this.product.inventoryStatus.value: this.product.inventoryStatus;\r\n          this.products[this.findIndexById(this.product.id)] = this.product;\r\n          this.$toast.add({severity:'success', summary: 'Successful', detail: 'Product Updated', life: 3000});\r\n        }\r\n        else {\r\n          this.product.id = this.createId();\r\n          this.product.code = this.createId();\r\n          this.product.image = 'product-placeholder.svg';\r\n          this.product.inventoryStatus = this.product.inventoryStatus ? this.product.inventoryStatus.value : 'INSTOCK';\r\n          this.products.push(this.product);\r\n          this.$toast.add({severity:'success', summary: 'Successful', detail: 'Product Created', life: 3000});\r\n        }\r\n        this.productDialog = false;\r\n        this.product = {};\r\n      }\r\n    },\r\n    editProduct(product) {\r\n      this.product = {...product};\r\n      this.productDialog = true;\r\n    },\r\n    confirmDeleteProduct(product) {\r\n      this.product = product;\r\n      this.deleteProductDialog = true;\r\n    },\r\n    deleteProduct() {\r\n      this.products = this.products.filter(val => val.id !== this.product.id);\r\n      this.deleteProductDialog = false;\r\n      this.product = {};\r\n      this.$toast.add({severity:'success', summary: 'Successful', detail: 'Product Deleted', life: 3000});\r\n    },\r\n    findIndexById(id) {\r\n      let index = -1;\r\n      for (let i = 0; i < this.products.length; i++) {\r\n        if (this.products[i].id === id) {\r\n          index = i;\r\n          break;\r\n        }\r\n      }\r\n      return index;\r\n    },\r\n    createId() {\r\n      let id = '';\r\n      var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n      for ( var i = 0; i < 5; i++ ) {\r\n        id += chars.charAt(Math.floor(Math.random() * chars.length));\r\n      }\r\n      return id;\r\n    },\r\n    exportCSV() {\r\n      this.$refs.dt.exportCSV();\r\n    },\r\n    confirmDeleteSelected() {\r\n      this.deleteProductsDialog = true;\r\n    },\r\n    deleteSelectedProducts() {\r\n      this.products = this.products.filter(val => !this.selectedProducts.includes(val));\r\n      this.deleteProductsDialog = false;\r\n      this.selectedProducts = null;\r\n      this.$toast.add({severity:'success', summary: 'Successful', detail: 'Products Deleted', life: 3000});\r\n    },\r\n    initFilters() {\r\n      this.filters = {\r\n        'global': {value: null, matchMode: FilterMatchMode.CONTAINS},\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '../assets/demo/badges.scss';\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}